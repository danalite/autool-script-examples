task: clipboard-manager

actions:
  # Save the clipboard content database every time Meta+C is pressed
  - event.on(__KEY_PRESSED__, {{ {'keys':'Meta+C'} }}):
    - data.read( {{ $env[CLIPBOARD] }} ) => $val
    - db.write( {{ {'target':'history.txt', 'mode':'a', 'content':$val, 'max':10, 'sep':'__SEP__' } }} )
  
  # When Meta is pressed more than 2 seconds, show the clipped content
  - event.on(__KEY_PRESSED__, {{ {'keys':'Meta', 'duration':1.5} }}):
    - db.read( {{ {'target':'history.txt', 'sep':'__SEP__' } }} ) => $val
    - >- 
      user.input( {{ {
        'title':'Clipboard Manager',
        'content': {
          'type': 'list',
          'content': $val,
        },
        'icon': 'https://raw.githubusercontent.com/danalites/autoo/main/imgs/logo.png'
      } }})
  
  # Keep task (and its event.on subtasks) alive
  - cmd.sleep(18000)