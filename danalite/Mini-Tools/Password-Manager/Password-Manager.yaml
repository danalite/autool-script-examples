task: password-manager
actions:
  - db.read({{ {'target':'accounts.txt', 'num':10} }}) => $accounts
  - |-
    user.input({{
      {
        'title': 'Password Manager',
        'content': {
          'type': 'tabs',
          'content': [
            {
              'tab': 'Copy Passwords',
              'type': 'select',
              'key': 'entry',
              'label': 'Select Password to Copy',
              'content': $accounts,
              'instantQuit': True,
              'max': 1
            },
            { 
              'tab': 'New Password',
              'type': 'list',
              'content': [
                {
                  'type': 'text',
                  'key': 'new',
                  'label': 'Identifier'
                },
                {
                  'type': 'number',
                  'key': 'length',
                  'label': 'password length',
                  'default': 15
                },
              ]
            },
            {
              'tab': 'Settings',
              'type': 'dynamic',
              'label': 'Select files from workspace',
              'key': 'test3',
              'search': 'File',
              'params' : {
                'location': '~/Desktop',
                'extensions': ['png'],
                'size': [0, 1000]
              }
            },
          ]
        },
        'icon': 'https://raw.githubusercontent.com/danalites/autoo/main/imgs/logo.png'
      }
    }}) => $ret
  - cmd.if({{ $ret['entry'] != None }}):
      - os.shell(pass -c {{ $ret['entry'][0] }})
  - cmd.if({{ $ret['new'] != None }}):
      - data.read({{ $ret['new'] }}) => $fileName
      - os.shell(pass generate {{ $fileName }} 15)
      - os.shell(pass -c {{ $fileName }})
      - >-
        db.write({{ {'target':'accounts.txt', 'content':$fileName,
        'mode':'a'}}})
configs:
  options: []
  shortcut: true
