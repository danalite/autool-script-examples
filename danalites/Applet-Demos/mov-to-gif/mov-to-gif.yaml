task: move-to-gif
doc: https://sspai.com/post/33732
actions:

  - os.shell(get-finder-current-path.applescript) => $mov

  # Select original size or downscale
  - user.input({{{
    'type':'select', 'options':['Original Size','720p','480p'], 'max':1, 'preset':False }}}) => $format

  # Assume the MOV is in the Desktop
  - cmd.if({{ $format == 'Original Size' }}):

    - os.shell(cd ~/Desktop; docker run --rm -v $(pwd):/workdir -w /workdir  jrottenberg/ffmpeg:4.1-alpine -i "demo.mov" -vf "fps=12,palettegen" -y palette.png)

    - os.shell(docker run --rm -v $(pwd):/workdir -w /workdir  jrottenberg/ffmpeg:4.1-alpine -i "demo.mov" -vf "fps=12,scale=320:-1:flags=lanczos" -y "demo.gif")

  - os.shell()

configs:
  options: []
  shortcut: false